!function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,s,n){e.Backbone=t(e,n,i,s)});else if("undefined"!=typeof exports){var i,s=require("underscore");try{i=require("jquery")}catch(n){}t(e,exports,s,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,s){var n=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=s,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,s){switch(t){case 1:return function(){return i[e](this[s])};case 2:return function(t){return i[e](this[s],t)};case 3:return function(t,n){return i[e](this[s],l(t,this),n)};case 4:return function(t,n,o){return i[e](this[s],l(t,this),n,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[s]),i[e].apply(i,t)}}},r=function(t,e,s){i.each(e,function(e,n){i[n]&&(t.prototype[n]=a(e,n,s))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?d(t):i.isString(t)?function(e){return e.get(t)}:t},d=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},c=/\s+/,h=function(t,e,s,n,o){var a,r=0;if(s&&"object"==typeof s){void 0!==n&&"context"in o&&void 0===o.context&&(o.context=n);for(a=i.keys(s);r<a.length;r++)e=h(t,e,a[r],s[a[r]],o)}else if(s&&c.test(s))for(a=s.split(c);r<a.length;r++)e=t(e,a[r],n,o);else e=t(e,s,n,o);return e};u.on=function(t,e,i){return _(this,t,e,i)};var _=function(t,e,i,s,n){if(t._events=h(p,t._events||{},e,i,{context:s,ctx:t,listening:n}),n){var o=t._listeners||(t._listeners={});o[n.id]=n}return t};u.listenTo=function(t,e,s){if(!t)return this;var n=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[n];if(!a){var r=this._listenId||(this._listenId=i.uniqueId("l"));a=o[n]={obj:t,objId:n,id:r,listeningTo:o,count:0}}return _(t,e,s,this,a),this};var p=function(t,e,i,s){if(i){var n=t[e]||(t[e]=[]),o=s.context,a=s.ctx,r=s.listening;r&&r.count++,n.push({callback:i,context:o,ctx:o||a,listening:r})}return t};u.off=function(t,e,i){return this._events?(this._events=h(m,this._events,t,e,{context:i,listeners:this._listeners}),this):this},u.stopListening=function(t,e,s){var n=this._listeningTo;if(!n)return this;for(var o=t?[t._listenId]:i.keys(n),a=0;a<o.length;a++){var r=n[o[a]];if(!r)break;r.obj.off(e,s,this)}return this};var m=function(t,e,s,n){if(t){var o,a=0,r=n.context,l=n.listeners;if(e||s||r){for(var d=e?[e]:i.keys(t);a<d.length;a++){e=d[a];var u=t[e];if(!u)break;for(var c=[],h=0;h<u.length;h++){var _=u[h];s&&s!==_.callback&&s!==_.callback._callback||r&&r!==_.context?c.push(_):(o=_.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}c.length?t[e]=c:delete t[e]}return t}for(var p=i.keys(l);a<p.length;a++)o=l[p[a]],delete l[o.id],delete o.listeningTo[o.objId]}};u.once=function(t,e,s){var n=h(f,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==s&&(e=void 0),this.on(n,e,s)},u.listenToOnce=function(t,e,s){var n=h(f,{},e,s,i.bind(this.stopListening,this,t));return this.listenTo(t,n)};var f=function(t,e,s,n){if(s){var o=t[e]=i.once(function(){n(e,o),s.apply(this,arguments)});o._callback=s}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),s=0;s<e;s++)i[s]=arguments[s+1];return h(g,this._events,t,void 0,i),this};var g=function(t,e,i,s){if(t){var n=t[e],o=t.all;n&&o&&(o=o.slice()),n&&v(n,s),o&&v(o,[e].concat(s))}return t},v=function(t,e){var i,s=-1,n=t.length,o=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a,r);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e);return}};u.bind=u.on,u.unbind=u.off,i.extend(e,u);var y=e.Model=function(t,e){var s=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(s=this.parse(s,e)||{});var n=i.result(this,"defaults");s=i.defaults(i.extend({},n,s),n),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,s){if(null==t)return this;var n;if("object"==typeof t?(n=t,s=e):(n={})[t]=e,s||(s={}),!this._validate(n,s))return!1;var o=s.unset,a=s.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var d=this.attributes,u=this.changed,c=this._previousAttributes;for(var h in n)e=n[h],i.isEqual(d[h],e)||r.push(h),i.isEqual(c[h],e)?delete u[h]:u[h]=e,o?delete d[h]:d[h]=e;if(this.idAttribute in n&&(this.id=this.get(this.idAttribute)),!a){r.length&&(this._pending=s);for(var _=0;_<r.length;_++)this.trigger("change:"+r[_],this,d[r[_]],s)}if(l)return this;if(!a)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var s in this.attributes)e[s]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,s={};for(var n in t){var o=t[n];i.isEqual(e[n],o)||(s[n]=o)}return!!i.size(s)&&s},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,s=t.success;return t.success=function(i){var n=t.parse?e.parse(i,t):i;return!!e.set(n,t)&&(s&&s.call(t.context,e,i,t),void e.trigger("sync",e,i,t))},D(this,t),this.sync("read",this,t)},save:function(t,e,s){var n;null==t||"object"==typeof t?(n=t,s=e):(n={})[t]=e,s=i.extend({validate:!0,parse:!0},s);var o=s.wait;if(n&&!o){if(!this.set(n,s))return!1}else if(!this._validate(n,s))return!1;var a=this,r=s.success,l=this.attributes;s.success=function(t){a.attributes=l;var e=s.parse?a.parse(t,s):t;return o&&(e=i.extend({},n,e)),!(e&&!a.set(e,s))&&(r&&r.call(s.context,a,t,s),void a.trigger("sync",a,t,s))},D(this,s),n&&o&&(this.attributes=i.extend({},l,n));var d=this.isNew()?"create":s.patch?"patch":"update";"patch"!==d||s.attrs||(s.attrs=n);var u=this.sync(d,this,s);return this.attributes=l,u},destroy:function(t){t=t?i.clone(t):{};var e=this,s=t.success,n=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){n&&o(),s&&s.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(D(this,t),a=this.sync("delete",this,t)),n||o(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var s=this.validationError=this.validate(t,e)||null;return!s||(this.trigger("invalid",this,s,i.extend(e,{validationError:s})),!1)}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(y,w,"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},C=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var s,n=Array(t.length-i),o=e.length;for(s=0;s<n.length;s++)n[s]=t[s+i];for(s=0;s<o;s++)t[s+i]=e[s];for(s=0;s<n.length;s++)t[s+o+i]=n[s]};i.extend(b.prototype,u,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,k))},remove:function(t,e){e=i.extend({},e);var s=!i.isArray(t);t=s?[t]:t.slice();var n=this._removeModels(t,e);return!e.silent&&n.length&&(e.changes={added:[],merged:[],removed:n},this.trigger("update",this,e)),s?n[0]:n},set:function(t,e){if(null!=t){e=i.extend({},x,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var s=!i.isArray(t);t=s?[t]:t.slice();var n=e.at;null!=n&&(n=+n),n>this.length&&(n=this.length),n<0&&(n+=this.length+1);var o,a,r=[],l=[],d=[],u=[],c={},h=e.add,_=e.merge,p=e.remove,m=!1,f=this.comparator&&null==n&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var v=this.get(o);if(v){if(_&&o!==v){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=v.parse(y,e)),v.set(y,e),d.push(v),f&&!m&&(m=v.hasChanged(g))}c[v.cid]||(c[v.cid]=!0,r.push(v)),t[a]=v}else h&&(o=t[a]=this._prepareModel(o,e),o&&(l.push(o),this._addReference(o,e),c[o.cid]=!0,r.push(o)))}if(p){for(a=0;a<this.length;a++)o=this.models[a],c[o.cid]||u.push(o);u.length&&this._removeModels(u,e)}var w=!1,b=!f&&h&&p;if(r.length&&b?(w=this.length!==r.length||i.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,C(this.models,r,0),this.length=this.models.length):l.length&&(f&&(m=!0),C(this.models,l,null==n?this.length:n),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=n&&(e.index=n+a),o=l[a],o.trigger("add",o,this,e);(m||w)&&this.trigger("sort",this,e),(l.length||u.length||d.length)&&(e.changes={added:l,removed:u,merged:d},this.trigger("update",this,e))}return s?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var s=0;s<this.models.length;s++)this._removeReference(this.models[s],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var s=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===s||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,s=this;return t.success=function(i){var n=t.reset?"reset":"set";s[n](i,t),e&&e.call(t.context,s,i,t),s.trigger("sync",s,i,t)},D(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var s=e.wait;if(t=this._prepareModel(t,e),!t)return!1;s||this.add(t,e);var n=this,o=e.success;return e.success=function(t,e,i){s&&n.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var s=new this.model(t,e);return s.validationError?(this.trigger("invalid",this,s.validationError,e),!1):s},_removeModels:function(t,e){for(var i=[],s=0;s<t.length;s++){var n=this.get(t[s]);if(n){var o=this.indexOf(n);this.models.splice(o,1),this.length--,delete this._byId[n.cid];var a=this.modelId(n.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,n.trigger("remove",n,this,e)),i.push(n),this._removeReference(n,e)}}return i},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,s),"change"===t){var n=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);n!==o&&(null!=n&&delete this._byId[n],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var O={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};r(b,O,"models");var E=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,S)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var s=t[e];if(i.isFunction(s)||(s=this[s]),s){var n=e.match(I);this.delegate(n[1],n[2],i.bind(s,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,s,n){var o=$[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(n.url||(a.url=i.result(s,"url")||R()),null!=n.data||!s||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(n.attrs||s.toJSON(n))),n.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",n.emulateJSON&&(a.data._method=o);var r=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||n.emulateJSON||(a.processData=!1);var l=n.error;n.error=function(t,e,i){n.textStatus=e,n.errorThrown=i,l&&l.call(n.context,t,e,i)};var d=n.xhr=e.ajax(i.extend(a,n));return s.trigger("request",s,d,n),d};var $={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,P=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(T.prototype,u,{initialize:function(){},route:function(t,s,n){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var o=this;return e.history.route(t,function(i){var a=o._extractParameters(t,i);o.execute(n,a,s)!==!1&&(o.trigger.apply(o,["route:"+s].concat(a)),o.trigger("route",s,a),e.history.trigger("route",o,s,a))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(j,"(?:$1)?").replace(M,function(t,e){return e?t:"([^/?]+)"}).replace(P,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var s=t.exec(e).slice(1);return i.map(s,function(t,e){return e===s.length-1?t||null:t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,z=/#.*$/;N.started=!1,i.extend(N.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(A,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");if(N.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(B,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var s=document.body,n=s.insertBefore(this.iframe,s.firstChild).contentWindow;n.document.open(),n.document.close(),n.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!N.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var s=i+t;if(t=this.decodeFragment(t.replace(z,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,s);else{if(!this._wantsHashChange)return this.location.assign(s);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var n=this.iframe.contentWindow;e.replace||(n.document.open(),n.document.close()),this._updateHash(n.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),e.history=new N;var L=function(t,e){var s,n=this;return s=t&&i.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},i.extend(s,n,e),s.prototype=i.create(n.prototype,t),s.prototype.constructor=s,s.__super__=n.prototype,s};y.extend=b.extend=T.extend=E.extend=N.extend=L;var R=function(){throw new Error('A "url" property or function must be specified')},D=function(t,e){var i=e.error;e.error=function(s){i&&i.call(e.context,t,s,e),t.trigger("error",t,s,e)}};return e}),function(t){"use strict";window.Hustle=function(t,e,i){var s={},n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=function(n,o){var a=n.split(".");if(a.length){var r=function(s,n){var a=s.split("."),l=a.splice(0,1)[0];if(l){if(a.length)n[l]=n[l]||{};else{var d=o.call(null,t,e,i);n[l]=_.isFunction(d)||"undefined"==typeof d?d:_.extend(n[l]||{},d)}a.length&&l&&r(a.join("."),n[l])}};r(n,s)}else{var l=s[n]||{};s[n]=_.extend(l,o.call(null,t,e,i))}},a=function(){return s},r=function(t){if(t.split(".").length){var e=!1,i=function(t,s){var n=t.split("."),o=n.splice(0,1)[0];e=s[o],n.length&&i(n.join("."),s[o])};return i(t,s),e}return s[t]||!1},l=_.extend({},Backbone.Events),d=Backbone.View.extend({__base_events:{"click .wph-tabs--wrap .wph-tabs--nav li label":"__base_toggle_tab"},initialize:function(){this.events=_.extend({},this.events,this.__base_events),_.isFunction(this.init_mix)&&this.init_mix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(t){this.trigger("before_render"),t.call(this),l.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)},__base_toggle_tab:function(t){var e=this.$(t.target),i=(e.attr("href")||"").replace(/^\#/,""),s=!!i&&this.$("#"+i),n=e.closest(".wph-tabs--wrap"),o=e.closest("li");s&&s.length&&(n.find(".wph-tabs--content").not(s).removeClass("current"),s.addClass("current"),o.addClass("current"),o.siblings().removeClass("current"))}}),u=_.memoize(function(t){var e;return function(i){return e=e||_.template(document.getElementById(t).innerHTML,null,n),e(i).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),c=_.memoize(function(t){var e;return function(i){return(e=e||_.template(t,null,n))(i)}}),h=function(){return t.extend(!0,{},n)},p=function(){var e=function(t){var e,i,s,n=document.cookie.split(";");for(s=t+"=",e=0;e<n.length;e+=1){for(i=n[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(s)){var o=i.substring(s.length,i.length);return o?JSON.parse(o):o}}return null},i=function(e,i,s){var n,o;i=t.isArray(i)||t.isPlainObject(i)?JSON.stringify(i):i,isNaN(s)?o="":(n=new Date,n.setTime(n.getTime()+24*s*60*60*1e3),o="; expires="+n.toGMTString()),document.cookie=e+"="+i+o+"; path=/"};return{set:i,get:e}}(),m=function(){return{Module_Show_Count:"hustle_module_show_count-"}}();return{define:o,get_modules:a,get:r,Events:l,View:d,template:u,create_template:c,get_template_options:h,cookie:p,consts:m}}(jQuery,document,window)}(jQuery);var Optin=Optin||{};Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(t){"use strict";Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.SLIDE_IN_COOKIE_HIDE_ALL="inc_optin_slide_in_hide_all",Optin.EMBEDDED_COOKIE_PREFIX="inc_optin_embedded_long_hidden-",Optin.global_mixin=function(){_.mixin({log:function(){console.log(arguments)},toBool:function(t){return _.isBoolean(t)?t:_.isString(t)&&["true","false","1"].indexOf(t.toLowerCase())!==-1?"true"===t.toLowerCase()||"1"===t.toLowerCase():_.isNumber(t)?!!t:!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&t},isTrue:function(t){return!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&(_.isNumber(t)?0!==t:(t=t.toString().toLowerCase(),["1","true","on"].indexOf(t)!==-1))},isFalse:function(t){return!_.isTrue(t)},control_base:function(t,e,i){return i=_.isUndefined(i)?"checked":i,t=_.toBool(t),e=_.isBoolean(t)?_.isTrue(e):e,_.isEqual(t,e)?i+"="+i:""},checked:function(t,e){return _.control_base(t,e,"checked")},selected:function(t,e){return _.control_base(t,e,"selected")},disabled:function(t,e){return _.control_base(t,e,"disabled")},"class":function(t,e,i){return _.isTrue(t)?e:"undefined"!=typeof i?i:""},add_class:function(t,e,i){return"class={class}".replace("{class}",_["class"](t,e,i))},toUpperCase:function(t){return _.isString(t)?t.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(t,e,i){e=cb(e,i);for(var s,n=_.keys(t),o=0,a=n.length;o<a;o++)if(s=n[o],e(t[s],s,t))return s}})},Optin.global_mixin(),Backbone.Model.prototype.toJSON=function(){var t=_.clone(this.attributes);for(var e in t)(t[e]instanceof Backbone.Model||Backbone.Collection&&t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},String.prototype.toInt=function(){return parseInt(this,10)},String.prototype.isEmpty=function(){return 0===this.length||!this.trim()},Optin.template=_.memoize(function(e){var i,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(n){return i=i||_.template(t("#"+e).html(),null,s),i(n).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.template_compat=_.memoize(function(e){var i;return function(s){return i=i||_.template(t("#"+e).html()),i(s).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.cookie=Hustle.cookie,t(document).on("blur",".hustle-modal-optin_form input, .hustle-modal-optin_form textarea, .hustle-modal-optin_form select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(e.val()&&e.val().trim&&""!==e.val().trim()?e.closest(".hustle-modal-optin_field").addClass("hustle-input-filled"):e.closest(".hustle-modal-optin_field").removeClass("hustle-input-filled"))}),Optin.Mixins={_mixins:{},_services_mixins:{},_desing_mixins:{},_display_mixins:{},add:function(t,e){this._mixins[t]=e},get_mixins:function(){return this._mixins},add_services_mixin:function(t,e){this._services_mixins[t]=e},get_services_mixins:function(){return this._services_mixins}}}(jQuery),Hustle.define("Modal_Email",function(t){"use strict";var e={};return Backbone.View.extend({id:"wph-modal-email",className:"wpmudev-modal",template:Optin.template("hustle-modal-email-tpl"),list_header_template:Optin.template("wpoi-email-list-header-tpl"),list_template:Optin.template("wpoi-emails-list-tpl"),show_delay:350,events:{"click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide"},initialize:function(){return this.render()},render:function(){var i=this,s=this.template(this.model);return s=s.replace("__id",this.model.id),s=s.replace("__type",this.model.type),this.$el.html(s),e[this.model.id]||(e[this.model.id]=t.ajax({url:ajaxurl,type:"GET",data:{action:"hustle_get_email_lists",id:i.model.id,_ajax_nonce:t("#hustle_get_emails_list_nonce").val()}}),this.delay_show=0),e[this.model.id].then(function(t){if(t.success){var e=t.data.module_fields,s=[];i.model.module_fields.length||(i.model.module_fields=e,i.$(".wpmudev-listing-head").html(i.list_header_template({module_fields:e})),_.each(e,function(t){s.push({name:t.name,label:t.label})}));var n=i.list_template({subscriptions:t.data.subscriptions,module_fields:s});i.$(".wpmudev-listing-body").html(n)}}),this.$el.appendTo("#wpmudev-hustle"),this.show(),this},show:function(){t("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},close:function(t){t.preventDefault(),this.$el.removeClass("show"),_.delay(function(){this.remove()}.bind(this),350)},hide:function(e){var i=t(e.target),s=this.$el.find(".wpmudev-box-modal"),n=this;(i.hasClass("wpmudev-modal-mask")||i.hasClass("wpmudev-i_close")||i.parent().hasClass("wpmudev-i_close"))&&(s.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){n.$el.removeClass("wpmudev-modal-active"),t("body").removeClass("wpmudev-modal-is_active"),s.removeClass("wpmudev-hide")},500))}})}),Hustle.define("Modal_Error",function(t){"use strict";var e=Backbone.View.extend({template:Optin.template("hustle-error-list-tpl"),className:"wpmudev-listing-row",controller:!1,initialize:function(t){this.controller=t.controller,this.module_fields=t.module_fields,this.render()},render:function(){var t=this.template({model:this.model,module_fields:this.module_fields});this.$el.html(t),this.$el.appendTo(this.controller.$(".wpmudev-listing-body"))}});return Backbone.View.extend({id:"wph-modal-error",template:Optin.template("hustle-modal-error-tpl"),list_header_template:Optin.template("hustle-error-header-list-tpl"),className:"wpmudev-modal",events:{"click .inc-opt-close-error-list":"toggleErrorLog","click .wpmudev-button-clear-logs":"clearLogs","click .wpmudev-button-delete-logs":"_clean","click .wpmudev-button-cancel-delete-logs":"cancelDelete","click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide"},initialize:function(t){return this.$el.html(this.template({id:this.model.id})),this.button=t.button,this.render()},render:function(){var i=this,s=this.template(this.model);return s=s.replace("__id",this.model.id),s=s.replace("__type",this.model.type),this.clearLogButton=this.$(".wpmudev-button-clear-logs"),this.exportButton=this.$(".wpmudev-button-download-csv"),this.deleteConfirmation=this.$(".hustle-delete-logs-confirmation"),t.getJSON(window.ajaxurl,{id:this.model.id,_wpnonce:optin_vars.error_log_nonce,action:"get_error_list"},function(t){if(t.success&&t.data&&t.data.logs){var s=t.data.module_fields;i.model.module_fields=s,i.$(".wpmudev-listing-head").html(i.list_header_template({module_fields:s})),_.each(t.data.logs,function(t){new e({module_fields:s,model:t,controller:i})}),i.show()}}),this.$el.html(s),t("#wph-modal-error").length>0?t("#wph-modal-error").html(this.$el):this.$el.appendTo("#wpmudev-hustle"),this.show(),this},show:function(){
t("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},hide:function(e){var i=t(e.target),s=this.$el.find(".wpmudev-box-modal"),n=this;(i.hasClass("wpmudev-modal-mask")||i.hasClass("wpmudev-i_close")||i.parent().hasClass("wpmudev-i_close"))&&(s.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){n.$el.removeClass("wpmudev-modal-active"),t("body").removeClass("wpmudev-modal-is_active"),s.removeClass("wpmudev-hide")},500))},toggleErrorLog:function(){this.$el.removeClass("show")},clearLogs:function(e){t(e.target).parents(".wpmudev-footer-clear").find(".hustle-delete-logs-confirmation").removeClass("wpmudev-hidden"),this.clearLogButton.attr("disabled",!0),this.exportButton.attr("disabled",!0)},_clean:function(){var e=this;t.get(window.ajaxurl,{id:this.model.id,_wpnonce:optin_vars.clear_log_nonce,action:"clear_logs"},function(t){t.success&&(e.toggleErrorLog(),_.delay(function(){e.button.remove(),e.remove()},350))})},cancelDelete:function(e){t(e.target).parents(".hustle-delete-logs-confirmation").addClass("wpmudev-hidden"),this.clearLogButton.removeAttr("disabled"),this.exportButton.removeAttr("disabled")}})}),Hustle.define("Modal_Import",function(t){"use strict";return Backbone.View.extend({id:"wph-modal-import",className:"wpmudev-modal",template:Optin.template("hustle-modal-import-tpl"),show_delay:350,events:{"click .wpmudev-button-confirm-import":"import","click .wpmudev-button-cancel-import":"cancelImport","click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide","click #wpmudev-button-import":"preImport"},initialize:function(){return this.render()},render:function(){var t=this.template(this.model);return this.importButton=this.$("#wpmudev-button-import"),this.$el.html(t),this.$el.appendTo("#wpmudev-hustle"),this.show(),this},cancelImport:function(e){t(e.target).parents(".hustle-confirmation").addClass("wpmudev-hidden"),this.importButton.prop("disabled",!1)},preImport:function(e){t("#wph-optin-service-import-form input").val()&&(t(e.target).parents(".wpmudev-box-footer").find(".hustle-confirmation").removeClass("wpmudev-hidden"),this.importButton.prop("disabled",!0))},"import":function(e){var i,s=t(e.target),n=t("#wph-optin-service-import-form input[type=file]").get(0).files[0];i=new FormData,i.append("action","hustle_import_module"),i.append("id",s.data("id")),i.append("type",s.data("type")),i.append("_ajax_nonce",s.data("nonce")),i.append("file",n),t.ajax({url:ajaxurl,type:"POST",data:i,cache:!1,processData:!1,contentType:!1,success:function(e){e.success?location.reload():(t("#import_error").html(t("<label><span>"+e.data+"</span></label>").prop({"class":"wpmudev-label--notice"})),t("#import_error label").delay(5e3).fadeOut("slow",function(){t(this).remove()}))}})},show:function(){t("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},hide:function(e){var i=t(e.target),s=this.$el.find(".wpmudev-box-modal"),n=this;(i.hasClass("wpmudev-modal-mask")||i.hasClass("wpmudev-i_close")||i.parent().hasClass("wpmudev-i_close"))&&(s.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){n.$el.removeClass("wpmudev-modal-active"),t("body").removeClass("wpmudev-modal-is_active"),s.removeClass("wpmudev-hide")},500))}})}),function(t){"use strict";var e=window.Optin||{};e.module_log_view=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=module_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),t(document).on("hustle:module:displayed",function(t,i){if("object"==typeof i){var s="undefined"!=typeof i.type?i.type:i.module_type,n=Hustle.consts.Module_Show_Count+s+"-"+i.module_id,o=Hustle.cookie.get(n);Hustle.cookie.set(n,o+1,30);var a="undefined"!=typeof i.display_type&&"embedded"===s?i.display_type:s;if(null!=i.tracking_types&&_.isTrue(i.tracking_types[a])&&"undefined"!=typeof e.module_log_view){var r=new e.module_log_view;r.set("type",a),r.set("module_type",s),r.set("module_id",i.module_id),r.save()}}})}(jQuery),function(t){function e(e,i){var s=e.find(".required"),n=e.parents(".hustle-modal-body").find(".hustle-modal-gdpr"),o=(t('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" preserveAspectRatio="none" class="hustle-icon hustle-i_warning"><path fill-rule="evenodd" d="M9 18c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9zm.25-3c.69 0 1.25-.56 1.25-1.25s-.56-1.25-1.25-1.25S8 13.06 8 13.75 8.56 15 9.25 15zm-.018-4C8 11 7 3.5 9.232 3.5s1.232 7.5 0 7.5z"/></svg>'),[]);return n.length>0&&!n.prop("checked")&&(n.next().addClass("hustle-modal-optin_error"),o.push(n)),t(".wpoi-field-error").remove(),s.each(function(){var e=t(this),s=e.attr("name")+"_error";return i?(e.next("label").find(".hustle-i_warning").show(),e.addClass("hustle-modal-optin_error"),o.push(e),o):void(_.isEmpty(this.value)||e.is("[type='email']")&&!this.value.trim().match(/^[\S]+\@[a-zA-Z0-9\-]+\.[\S]{2,}$/gi)?(e.next("label").find(".hustle-i_warning").show(),e.addClass("hustle-modal-optin_error"),o.push(e)):(e.next("label").find(".hustle-i_warning").hide(),e.removeClass("hustle-modal-optin_error"),t("."+s).remove()))}),0===o.length}t(document).on("submit","form.hustle-modal-optin_form",function(i){i.preventDefault();var s=t(i.target),n=s.find("button"),o=s.closest(".hustle-modal"),a=o.parent(),r=a.data("id"),l=a.data("type"),d=_.find(Modules,function(t,e){return r===parseInt(t.module_id)}),u=_.isTrue(d.test_mode),c=t("<span class='wpoi-submit-failure'>"+inc_opt.l10n.submit_failure+"</span>");return"embedded"!==d.module_type&&"social_sharing"!==d.module_type||_.isObject(d.test_types)&&"undefined"!==d.test_types[l]&&_.isTrue(d.test_types[l])&&(u=!0),s.parent().find(".wpoi-submit-failure").remove(),u?(c.html(inc_opt.l10n.test_cant_submit),void t(c).insertAfter(s)):void(!s.data("sending")&&e(s,u)&&(n.attr("disabled",!0),n.addClass("hustle-onload"),s.addClass("hustle-onload"),s.data("sending",!0),t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"module_form_submit",data:{form:s.serialize(),module_id:r,page_type:inc_opt.page_type,page_id:inc_opt.page_id,uri:encodeURI(window.location.href),type:l}},success:function(e){if(e&&e.success){if("undefined"!=typeof d.content.after_subscription){var i;"popup"===d.module_type?i=Optin.POPUP_COOKIE_PREFIX+r:"slidein"===d.module_type?i=Optin.SLIDE_IN_COOKIE_PREFIX+r:"embedded"===d.module_type&&(i=Optin.EMBEDDED_COOKIE_PREFIX+r),"no_show_on_post"===d.content.after_subscription?Optin.cookie.set(i+"_success_"+inc_opt.page_id,r):"no_show_all"===d.content.after_subscription&&Optin.cookie.set(i+"_success",r)}if("redirect"===d.content.after_successful_submission)window.location.replace(d.content.redirect_url);else{var n=o.find(".hustle-modal-success");if(n.find(".hustle-modal-success_message").html(d.content.success_message),n.addClass("hustle-modal-success_show"),_.isTrue(d.content.auto_close_success_message)){var a=parseInt(d.content.auto_close_time),l=d.content.auto_close_unit;"minutes"===l&&(a*=60),a*=1e3,_.delay(function(){var t=o.find(".hustle-modal-close .hustle-icon");t.length>0?t.trigger("click"):n.removeAttr("style"),n.removeClass("hustle-modal-success_show")},a)}}}else{var u="";u=e.data?t.isArray(e.data)?e.data.pop():e.data:inc_opt.l10n.submit_failure,c.html(u?u:inc_opt.l10n.submit_failure),t(c).insertAfter(s)}},error:function(){t(c).insertAfter(s)},complete:function(){n.attr("disabled",!1),s.removeClass("hustle-onload"),n.removeClass("hustle-onload"),s.data("sending",!1)}})))}),t(document).on("change","form.hustle-modal-optin_form",function(e){var i=t(e.target);i.hasClass("hustle-modal-optin_error")&&(i.removeClass("hustle-modal-optin_error"),i.next("label").find(".hustle-i_warning").hide())}),t(document).on("submit","form.hustle-unsubscribe-form",function(e){e.preventDefault();var i=t(e.target),s=i.find(".hustle-email-section");data=i.serialize(),$button=i.find("button"),$failure=t('<span class="wpoi-submit-failure">'+inc_opt.l10n.submit_failure+"</span>"),$button.attr("disabled",!0),$button.addClass("hustle-onload"),i.addClass("hustle-onload"),i.find(".wpoi-submit-failure").remove(),t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"hustle_unsubscribe_form_submission",data:data},success:function(t){t.success&&!0===t.success?(s.hide(),t.data.wrapper&&t.data.html&&i.find(t.data.wrapper).html(t.data.html)):t.data.html&&($failure.html(t.data.html),i.prepend($failure))},error:function(){i.prepend($failure)},complete:function(){$button.attr("disabled",!1),i.removeClass("hustle-onload"),$button.removeClass("hustle-onload")}})})}(jQuery);var Optin=Optin||{};!function(t,e){"use strict";function i(){var e=o.height(),i=o.scrollTop(),s=i+e;t.each(n,function(){var e=t(this),n=e.outerHeight(),o=e.offset().top,a=o+n;a>=i&&o<=s?e.addClass("in-view"):e.removeClass("in-view")})}function s(t,e){}t.each(["hustle_show","hustle_hide"],function(e,i){var s=t.fn[i];t.fn[i]=function(){return this.trigger(i),s.apply(this,arguments)}});var n=t(".inc_opt_inline_wrap"),o=t(window);t(e).on("hustle:module:displayed",_.debounce(s,100,!1)),o.on("scroll resize",_.debounce(i,100,!1)),o.trigger("scroll"),t(document).on("blur",".hustle-modal-optin_form input, .hustle-modal-optin_form textarea, .hustle-modal-optin_form select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==e.val().trim()?e.closest(".hustle-modal-optin_field").addClass("hustle-input-filled"):e.closest(".hustle-modal-optin_field").removeClass("hustle-input-filled"))}),t(document).on("focus",".wpoi-optin input.required",function(){t(this).next("label").find("i.wphi-font").removeClass("i-error")}),Optin.apply_custom_size=function(t,e){function i(){"embedded"===t.module_type&&r.width()<500&&Math.max(document.documentElement.clientWidth,window.innerWidth||0)>783?r.addClass("hustle-size-small"):r.removeClass("hustle-size-small")}function s(){a.find(".hustle-modal-success").css({height:a.find(".hustle-modal-body").height()+"px"})}var n=(t.content,t.design),a=(n.style,n.form_layout,e.find(".hustle-modal")),r=a.find(".hustle-modal-body");o.on("resize",i),o.ready(i),a.find(".hustle-modal-success").css({height:a.find(".hustle-modal-body").height()+"px"}),o.on("resize",s),a.find(".hustle-modal-success_message").html()&&0==a.find(".hustle-modal-success_message").html().length&&a.find(".hustle-modal-success_message").remove(),_.isTrue(n.customize_size)&&a.css({width:n.custom_width+"px","max-width":"unset",height:n.custom_height+"px","max-height":"unset"})}}(jQuery,document),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin.Module_log_cta_conversion=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=hustle_cta_converted",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),Optin.Module=Backbone.View.extend({isCC:!1,display_id:"display",showClass:"wph-modal-active",module_id:"",module_type:"",type:"",settings:{},data:{},appear_after:"time",mask:!1,should_remove:!1,parent:"body",anim_in_time:10,anim_out_time:2e3,viewed:!1,cookie_key:"",events:{click:"click","click .hustle-modal-close .hustle-icon":"close","click button.hustle-modal-close":"close","click .hustle-modal-cta":"cta_clicked"},click:_.noop,initialize:function(t){this.data=t,this.settings=t.settings,this.module_id=t.module_id,this.module_type=t.module_type,this.maskClass="wph-modal-mask wpmudev-modal-mask",this.appear_after=this.settings.triggers.trigger,this.expiration=parseInt(this.settings.expiration,10),this.expiration_days=this.get_expiration_days(),"popup"===this.module_type?this.cookie_key=Optin.POPUP_COOKIE_PREFIX+this.module_id:"slidein"===this.module_type&&(this.cookie_key=Optin.SLIDE_IN_COOKIE_PREFIX+this.module_id),this.triggers={on_time:this.settings.triggers.on_time,on_time_delay:this.settings.triggers.on_time_delay,on_time_unit:this.settings.triggers.on_time_unit,on_scroll:this.settings.triggers.on_scroll,on_scroll_page_percent:parseInt(this.settings.triggers.on_scroll_page_percent),on_scroll_css_selector:this.settings.triggers.on_scroll_css_selector,on_click_element:this.settings.triggers.on_click_element,on_exit_intent_per_session:this.settings.triggers.on_exit_intent_per_session,on_exit_intent_delayed:this.settings.triggers.on_exit_intent_delayed,on_exit_intent_delayed_time:this.settings.triggers.on_exit_intent_delayed_time,on_exit_intent_delayed_unit:this.settings.triggers.on_exit_intent_delayed_unit,on_adblock:this.settings.triggers.on_adblock,on_adblock_delayed:this.settings.triggers.on_adblock_delayed,on_adblock_delayed_time:this.settings.triggers.on_adblock_delayed_time,on_adblock_delayed_unit:this.settings.triggers.on_adblock_delayed_unit},(_.contains(["time","scrolled","adblock"],this.appear_after)||"exit_intent"===this.appear_after&&_.isTrue(this.settings.triggers.on_exit_intent_per_session))&&(this.should_remove=!0),this.should_display()&&this.render()},should_display:function(){var t;return(t="no_show_on_post"===this.settings.after_close?!(parseInt(inc_opt.page_id,10)>0)||!_.isTrue(Optin.cookie.get(this.cookie_key+"_"+inc_opt.page_id)):"no_show_all"!==this.settings.after_close||!_.isTrue(Optin.cookie.get(this.cookie_key)))?("no_show_on_post"===this.data.content.after_subscription?t=!(parseInt(inc_opt.page_id,10)>0)||!_.isTrue(Optin.cookie.get(this.cookie_key+"_success_"+inc_opt.page_id)):"no_show_all"===this.data.content.after_subscription&&(t=!_.isTrue(Optin.cookie.get(this.cookie_key+"_success"))),t):t},get_expiration_days:function(){switch(this.settings.expiration_unit){case"months":return 30*this.expiration;case"weeks":return 7*this.expiration;case"hours":return this.expiration/24;case"minutes":return this.expiration/1440;case"seconds":return this.expiration/86400;default:return this.expiration}},render:function(){"undefined"==typeof this.data.unique_id&&(this.data.unique_id="");var e=parseInt(this.data.content.use_email_collection,10)?Optin.template("wpmudev-hustle-modal-with-optin-tpl"):Optin.template("wpmudev-hustle-modal-without-optin-tpl"),i=e(this.data);if(this.$el.addClass("module_id_"+this.module_id),this.$el.html(i),"undefined"!=typeof this.data.content.args&&null!==this.data.content.args&&"undefined"!=typeof this.data.content.active_email_service){var s=Optin.template("optin-"+this.data.content.active_email_service+"-"+this.module_id+"-args-tpl"),n=s(this.data.content.args),o=this.$(".hustle-modal-provider-args-container");o.length&&o.html(n)}return this.$el.appendTo(this.parent),this.$el.display=t.proxy(this,"display"),this.$el.on("hustle_show",t.proxy(this,"on_module_show")),this.$el.on("hustle_hide",t.proxy(this,"on_module_hide")),this.$el.data(this.data),this.html=this.$el.html(),this.prepare_display(),"function"==typeof this[this.appear_after+"_trigger"]&&this[this.appear_after+"_trigger"](),this},prepare_display:function(){this.viewed=!0,this.$el.is("."+this.showClass)||this.$el.html(this.html)},display:function(){var e=this;if(!this.$el.is("."+this.showClass)&&(this.$el.removeClass(this.settings.animation_out),this.add_mask(),this.$el.trigger("hustle_show",this),t(document).on("keydown",t.proxy(this.escape_key,this)),!parseInt(this.data.content.use_email_collection,10))){var i=this.data.settings.on_submit;"undefined"!=typeof this.data.type?this.data.type:this.data.module_type;"close"===i||"default"===i?(this.$el.find("form.wpcf7-form").length>0?this.$el.on("wpcf7mailsent",function(t){setTimeout(function(){e.close()},2e3)}):this.$el.find("form").on("submit",_.bind(this.close,this)),this.handle_compatibility()):"redirect"===i&&this.$el.find("form").on("submit",_.bind(this.redirect_form_submit,this))}},add_mask:function(){var e=!_.isTrue(this.settings.allow_scroll_page),i=!_.isTrue(this.settings.not_close_on_background_click);"popup"!==this.data.module_type||this.$el.find(".wph-modal-mask").length>0||(e&&t("html").addClass("hustle-no-scroll"),this.mask=t('<div class="'+this.maskClass+' ">'),this.mask.insertBefore(this.$el.find(".hustle-modal")),i&&this.mask.on("click",t.proxy(this,"close")))},time_trigger:function(){if(_.isTrue(this.triggers.on_time)){var e=1e3*parseInt(this.triggers.on_time_delay,10);"minutes"===this.triggers.on_time_unit?e*=60:"hours"===this.triggers.on_time_unit&&(e*=3600),_.delay(t.proxy(this,"display"),e)}else this.display()},click_trigger:function(){var i=this,s="";if(""!==(s=t.trim(this.triggers.on_click_element))){var n=t(s);n.length&&t(e).on("click",s,function(t){t.preventDefault(),i.display()})}t(e).on("click",".hustle_module_shortcode_trigger",function(e){e.preventDefault(),t(this).data("id")==i.data.module_id&&t(this).data("type")==i.type&&i.display()})},scroll_trigger:function(){var s=this,n=!1;if("scrolled"===this.triggers.on_scroll&&t(i).scroll(_.debounce(function(){n||100*i.pageYOffset/t(e).height()>=parseFloat(s.triggers.on_scroll_page_percent)&&(s.display(),n=!0)},50)),"selector"===this.triggers.on_scroll){var o=t(this.triggers.on_scroll_css_selector);o.length&&t(i).scroll(_.debounce(function(){n||i.pageYOffset>=o.position().top&&(s.display(),n=!0)},50))}},scrolled_trigger:function(){return this.scroll_trigger()},exit_intent_trigger:function(){var i=this,s=0;_.isTrue(this.triggers.on_exit_intent_delayed)&&(s=1e3*parseInt(this.triggers.on_exit_intent_delayed_time,10),"minutes"===this.triggers.on_exit_intent_delayed_time?s*=60:"hours"===this.triggers.on_exit_intent_delayed_time&&(s*=3600)),_.isTrue(this.triggers.on_exit_intent_per_session)?t(e).on("mouseleave",_.debounce(function(e){t("input").is(":focus")||(i.set_exit_timer(),t(this).off(e))},300)):t(e).on("mouseleave",_.debounce(function(e){t("input").is(":focus")||i.set_exit_timer()},300)),t("html").on("mousemove",_.debounce(function(t){i.reset_exit_timer()},300)),this.exit_timer=null,this.reset_exit_timer=function(){i.exit_timer&&clearTimeout(i.exit_timer)},this.set_exit_timer=function(){i.exit_timer=setTimeout(function(){i.exit_timer=null,i.display()},s)}},adblock_trigger:function(){var e=!t("#hustle_optin_adBlock_detector").length;if(e&&_.isTrue(this.triggers.on_adblock))if(_.isFalse(this.triggers.on_adblock_delayed))this.display();else{var i=1e3*parseInt(this.triggers.on_adblock_delayed_time,10);"minutes"===this.triggers.on_adblock_delayed_unit?i*=60:"hours"===this.triggers.on_adblock_delayed_unit&&(i*=3600),_.delay(t.proxy(this,"display"),i)}},on_module_show:function(){this.$el.addClass("wph-modal-active"),this.$el.attr("data-id",this.data.module_id),this.$el.attr("data-type",this.data.module_type),this.on_animation_in(),t(document).trigger("hustle:module:displayed",[this.data])},on_module_hide:function(){t(document).trigger("wpoi:hide",[this.type,this.$el,this.opt])},on_animation_in:function(){var t=this,e=this.$el.find(".hustle-modal"),i=this.data.settings.animation_in;this.$el.hasClass("wph-modal-active")&&e.hasClass("hustle-animated")?setTimeout(function(){"no_animation"===i?e.addClass("hustle-modal-static"):e.addClass("hustle-animate-"+i),t.apply_custom_size()},100):(e.addClass("hustle-modal-static"),t.apply_custom_size())},apply_custom_size:function(){Optin.apply_custom_size(this.data,this.$el)},close:function(e){"undefined"!=typeof e&&e.stopPropagation(),this.clear_running_compat_interval();var i=this,s=this.$el.find(".hustle-modal"),n="hustle-animate-"+this.data.settings.animation_in,o="hustle-animate-"+this.data.settings.animation_out,a=1e3;s.hasClass("hustle-animated")&&("no_animation"===this.data.settings.animation_in?s.removeClass("hustle-modal-static").addClass(o):s.removeClass(n).addClass(o),"fadeOut"===this.data.settings.animation_out&&(a=305),"newspaperOut"===this.data.settings.animation_out&&(a=505),"bounceOut"===this.data.settings.animation_out&&(a=755),0!==this.data.settings.animation_out.length&&"no_animation"!==this.data.settings.animation_out||(a=0),setTimeout(function(){i.$el.removeClass("wph-modal-active"),s.removeClass(o)},a)),s.hasClass("hustle-modal-static")&&setTimeout(function(){s.removeClass("hustle-modal-static"),i.$el.removeClass("wph-modal-active")},0),t("html").removeClass("hustle-no-scroll"),t(document).off("keydown",t.proxy(i.escape_key,this)),"no_show_on_post"===this.settings.after_close?parseInt(inc_opt.page_id,10)>0&&Optin.cookie.set(this.cookie_key+"_"+inc_opt.page_id,this.module_id,this.expiration_days):"no_show_all"===this.settings.after_close&&Optin.cookie.set(this.cookie_key,this.module_id,this.expiration_days),s.find("iframe").each(function(){t(this).attr("src",t(this).attr("src"))})},escape_key:function(t){27===t.keyCode&&this.close(t)},redirect_form_submit:function(e){var i=t(e.target);window.location.replace(i.attr("action"))},handle_compatibility:function(){var t=this,e=this.$el.find("form#subscribes_form"),i=1e3,s=216e6;e.length&&(t.wait_enewsletter_result=setInterval(function(){i+=1e3;var e=t.$el.find("#message");_.isEmpty(e.text().trim())&&s!==i||t.close()},1e3))},clear_running_compat_interval:function(){"undefined"!=typeof this.wait_enewsletter_result&&clearInterval(this.wait_enewsletter_result)},cta_clicked:function(t){if("embedded"!==this.module_type&&"undefined"!=typeof Optin.Module_log_cta_conversion){var e=new Optin.Module_log_cta_conversion;e.set("type",this.module_type),e.set("module_type",this.module_type),e.set("module_id",this.module_id),e.save()}}}))}(jQuery,document,window),function(t){"use strict";Optin=Optin||{},Optin.Hustle_Embeddeds={render_hustle_module_embeds:function(e){var i=this;t(".hustle_module_after_content_wrap, .hustle_module_widget_wrap, .hustle_module_shortcode_wrap").each(function(){var e=t(this),s=e.data("id"),n=e.data("type"),o=e.data("unique_id"),a="1"===inc_opt.is_admin;if(s){var r=_.find(Modules,function(t,e){return s===parseInt(t.module_id)});if(r){if(null!==r.test_types){if("undefined"!=typeof r.test_types&&"undefined"!=typeof r.test_types[n]&&(r.test_types[n]||"true"===r.test_types[n])&&!a)return;"undefined"!=typeof r.test_types&&"undefined"!=typeof r.test_types[n]&&(r.test_types[n]||"true"===r.test_types[n])&&a&&(r.settings[n+"_enabled"]="true")}if(_.isTrue(r.settings[n+"_enabled"])){var l=!0,d=Optin.EMBEDDED_COOKIE_PREFIX+s+"_success";if("no_show_on_post"===r.content.after_subscription?l=!(parseInt(inc_opt.page_id,10)>0)||!_.isTrue(Optin.cookie.get(d+"_"+inc_opt.page_id)):"no_show_all"===r.content.after_subscription&&(l=!_.isTrue(Optin.cookie.get(d))),l){r.content.cta_url&&(/^(f|ht)tps?:\/\//i.test(r.content.cta_url)||(r.content.cta_url="http://"+r.content.cta_url)),"undefined"==typeof o&&(o=""),r.unique_id=o;var u=parseInt(r.content.use_email_collection,10)?Optin.template("wpmudev-hustle-modal-with-optin-tpl"):Optin.template("wpmudev-hustle-modal-without-optin-tpl");if(e.html(u(r)),"undefined"!=typeof r.content.args&&null!==r.content.args&&"undefined"!=typeof r.content.active_email_service){var c=Optin.template("optin-"+r.content.active_email_service+"-"+r.module_id+"-args-tpl"),h=c(r.content.args),p=t(".module_id_"+r.module_id+" .hustle-modal-provider-args-container");p.length&&p.html(h)}r.type=n,i.on_animation_in(r,e),r.type="embedded",r.display_type=n,t(document).trigger("hustle:module:displayed",r),e.find("a.hustle-modal-cta").on("click",function(){if("undefined"!=typeof Optin.Module_log_cta_conversion){var t=new Optin.Module_log_cta_conversion;t.set("type",n),t.set("module_type","embedded"),t.set("module_id",s),t.save()}}),e.find(".hustle-modal-close").remove()}}}}})},on_animation_in:function(t,e){var i=e.find(".hustle-modal"),s=t.settings.animation_in;i.hasClass("hustle-animated")?setTimeout(function(){i.addClass("hustle-animate-"+s),Optin.apply_custom_size(t,e)},100):Optin.apply_custom_size(t,e)}},_.delay(function(){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!1)},500),Hustle.Events.on("upfront:editor:widget:render",function(t){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!0)}),Hustle.Events.on("upfront:editor:shortcode:render",function(t){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!0)})}(jQuery),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin=window.Optin||{},Optin.PopUp=Optin.Module.extend({className:"wph-modal",type:"popup",render:function(t){this.$el.addClass("hui-module-type--popup"),Optin.Module.prototype.render.apply(this,t),"function"==typeof Optin.render_hustle_sshare_module_embeds&&Optin.render_hustle_sshare_module_embeds(!1)}}))}(jQuery,document,window),function(t,e,i){"use strict";inc_opt.is_upfront||(Optin=window.Optin||{},Optin.SlideIn=Optin.Module.extend({className:"wph-modal",type:"slidein",prevent_hide_after:!1,delay_time:0,render:function(){var t="hui-module-type--slidein inc_opt_slidein inc_opt_slidein_"+this.settings.display_position+" inc_optin wpoi-slide";this.delay_time=this.convert_to_microseconds(this.settings.auto_hide_time,this.settings.auto_hide_unit),this.$el.addClass(t),Optin.Module.prototype.render.apply(this,arguments)},convert_to_microseconds:function(t,e){return"seconds"===e?1e3*parseInt(t,10):"minutes"===e?60*parseInt(t,10)*1e3:60*parseInt(t,10)*60*1e3},on_module_show:function(){if(this.mask&&this.mask.removeClass("wpoi-show"),_.isTrue(this.settings.auto_hide)){var t=this;_.delay(function(){t.prevent_hide_after||t.on_animation_out()},this.delay_time)}Optin.Module.prototype.on_module_show.apply(this,arguments)},on_module_hide:function(){var t=!1;"hide_all"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL,this.optin_id,30),t=!0),"no_show"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+this.optin_id,this.optin_id,30),t=!0),t&&(this.mask&&this.mask.remove(),this.remove())},click:function(){this.prevent_hide_after=!0},on_animation_in:function(){var t=this,e=this.$el.find(".hustle-modal"),i=this.get_slide_in_direction(this.settings.display_position,"in");setTimeout(function(){e.addClass("hustle-animate-slideIn"+i),t.apply_custom_size()},100)},close:function(t){t.stopPropagation(),this.on_animation_out(),"no_show_on_post"===this.settings.after_close?parseInt(inc_opt.page_id,10)>0&&Optin.cookie.set(this.cookie_key+"_"+inc_opt.page_id,this.module_id,this.expiration_days):"no_show_all"===this.settings.after_close&&Optin.cookie.set(this.cookie_key,this.module_id,this.expiration_days)},on_animation_out:function(){var t=this,e=this.get_slide_in_direction(this.settings.display_position,"out"),i=this.$el.find(".hustle-modal"),s="hustle-animate-slideIn"+e,n="hustle-animate-slideOut"+e,o=1e3;i.removeClass(s).addClass(n),setTimeout(function(){t.$el.removeClass("wph-modal-active"),i.removeClass(n)},o)},get_slide_in_direction:function(t,e){return"nw"===t||"w"===t||"sw"===t?"Left":"ne"===t||"e"===t||"se"===t?"Right":"s"===t&&"in"===e||"n"===t&&"out"===e?"Up":"Down"}}))}(jQuery,document,window),function(t,e,i){"use strict";var s=window.Optin||{};s.SS_log_view=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=module_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href),module_type:"social_sharing"},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),s.SS_log_conversion=s.SS_log_view.extend({url:inc_opt.ajaxurl+"?action=hustle_sshare_converted"}),s.SShare_native_share_enpoints={facebook:"https://www.facebook.com/sharer/sharer.php?u=",twitter:"https://twitter.com/intent/tweet?url=",google:"https://plus.google.com/share?url=",pinterest:"https://www.pinterest.com/pin/create/button/?url=",reddit:"https://www.reddit.com/submit?url=",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url=",vkontakte:"https://vk.com/share.php?url="},s.SShare=Backbone.View.extend({template:s.template("hustle-sshare-front-tpl"),events:{"click a.hustle-social-icon-native":"click_social_native","click a.hustle-social-icon-custom":"click_social_linked"},initialize:function(t){this.opts=t,this.module_id=t.module_id,this.module_type="social_sharing",this.content=t.content,this.design=t.design,this.settings=t.settings,this.is_compat="undefined"!=typeof t.is_compat,"undefined"!=typeof t.parent&&(this.parent=t.parent),this.model_json=_.extend({module_id:this.module_id,module_display_type:this.module_display_type},this.content,this.design,this.settings),this.render()},render:function(e){var i=this.parent,n=this.model_json.location_align_x,o=this.model_json.location_align_y,a=_.templateSettings;if(this.is_compat&&(s.global_mixin(),_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}),this._handle_icons_order(),this.setElement(this.template(_.extend({},this.model_json))),"floating_social"===this.module_display_type&&(i=t("content"===this.model_json.location_type?"#content":"selector"===this.model_json.location_type?this.model_json.location_target:"body")),0!=i.length){if(this.$el.appendTo(i),"floating_social"===this.module_display_type){var r=t(".hustle-sshare-module-id-"+this.model_json.module_id);"left"===n?r.css("left",this.model_json.location_left+"px"):r.css("right",this.model_json.location_right+"px"),"top"===o?r.css("top",this.model_json.location_top+"px"):(r.css("top","auto"),r.css("bottom",this.model_json.location_bottom+"px"))}this.is_compat&&(_.templateSettings=a),this.html=this.$el.html(),this.log_view(this.module_display_type,this.opts),this.update_network_shares()}},update_network_shares:function(){_.delay(function(){t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"update_network_shares",page_id:inc_opt.page_id}})},5e3)},_handle_icons_order:function(){var t={},e=this.model_json.social_icons,i=this.model_json.icons_order,s=i.split(",");i&&s.length&&(_.each(s,function(i,s){"undefined"!=typeof e[i]&&(t[i]=e[i],e=_.pick(e,function(t,e){if(i!==e)return e=t}))}),Object.keys(e).length&&(t=_.extend(t,_.pick(e,function(t,e){if("undefined"!=typeof t)return e=t}))),this.model_json.social_icons=t)},sanitize_url:function(t){return t&&(/^(f|ht)tps?:\/\//i.test(t)||(t="http://"+t)),t},click_social_native:function(e){e.preventDefault();var i=this,n=this.$(e.target),o=n.closest("a.hustle-social-icon-native"),a=o.data("social");o.hasClass("hustle-social-icon-counter-native")?(this._add_check_native_social_counter(o),t('a[data-social="'+a+'"].hustle-social-icon-counter-native').not(o).each(function(){i._add_check_native_social_counter(t(this))})):(this._update_social_counter(o),t('a[data-social="'+a+'"]').not(o).not(".hustle-social-icon-counter-native").each(function(){i._update_social_counter(t(this))})),this.log_conversion(this.module_display_type,this.opts,a,"native"),a&&"undefined"!=typeof s.SShare_native_share_enpoints[a]&&window.open(s.SShare_native_share_enpoints[a]+inc_opt.current_url,"MsgWindow","menubar=no,toolbar=no,resizable=yes,scrollbars=yes")},click_social_linked:function(t){var e=this.$(t.target),i=e.closest("a.linked-social-share"),s=i.data("social");null!=this.opts.tracking_types&&_.isTrue(this.opts.tracking_types[this.module_display_type])&&this.log_conversion(this.module_display_type,this.opts,s,"linked")},_update_social_counter:function(t){_.delay(function(){var e=t.find(".hustle-shares-counter span");if(e.length){var i=parseInt(e.text())+1;e.text(i)}},5e3)},_add_check_native_social_counter:function(t){_.delay(function(){var e=t.find(".hustle-shares-counter span");if(e.length){var i='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="38" viewBox="0 0 50 38" preserveAspectRatio="xMaxYMax" class="hustle-icon hustle-i_checkmark"><path class="hustle-icon-path" d="M45.114.46c-.61-.614-1.604-.614-2.21 0L19.607 23.65c-.61.618-1.607.618-2.213 0L7.186 13.254c-.302-.308-.698-.46-1.096-.462-.402-.002-.81.15-1.116.462L.464 17.31c-.3.307-.464.693-.464 1.095 0 .404.163.827.465 1.134l10.293 10.8c.608.617 1.606 1.617 2.213 2.23l4.426 4.46c.61.61 1.602.61 2.213 0L49.54 7.15c.61-.61.61-1.617 0-2.23L45.114.46z"></path></svg>';
e.html(i)}},5e3)},log_view:function(t,e){if(null!=e.tracking_types&&_.isTrue(e.tracking_types[t])&&"undefined"!=typeof s.SS_log_view){var i=new s.SS_log_view;i.set("type",t),i.set("module_id",e.module_id),i.save()}if(!window.hasOwnProperty("optin_vars")){var n=Hustle.consts.Module_Show_Count+this.module_type+"-"+e.module_id,o=Hustle.cookie.get(n);Hustle.cookie.set(n,o+1,30)}},log_conversion:function(t,e,i,n){var o=!(null==e.tracking_types||!_.isTrue(e.tracking_types[t]));if("undefined"!=typeof s.SS_log_conversion){var a=new s.SS_log_conversion;a.set("type",t),a.set("module_id",e.module_id),a.set("source",i+"_icon"),a.set("track",o),a.set("service_type",n),a.save()}}}),s.SShare_floating=s.SShare.extend({module_display_type:"floating_social",display_type:"column"}),s.SShare_widget=s.SShare.extend({module_display_type:"widget",display_type:"row"}),s.SShare_shortcode=s.SShare.extend({module_display_type:"shortcode",display_type:"row"}),s.render_hustle_sshare_module_embeds=function(e){t(".hustle_sshare_module_widget_wrap, .hustle_sshare_module_shortcode_wrap").each(function(){var i=t(this),n=i.data("id"),o=i.data("type"),a="1"===inc_opt.is_admin;if(n){var r=_.find(Modules,function(t,e){return n===parseInt(t.module_id)});if(r){var l=o+"_enabled";("undefined"==typeof r.test_types||null===r.test_types||"undefined"==typeof r.test_types[o]||!r.test_types[o]&&"true"!==r.test_types[o]||a)&&("undefined"!=typeof r.test_types&&null!==r.test_types&&"undefined"!=typeof r.test_types[o]&&(r.test_types[o]||"true"===r.test_types[o])&&a&&(r.settings[l]="true"),_.isTrue(r.settings[l])&&(r.parent=i,"undefined"!=typeof e&&e&&(r.is_compat=!0),i.html(""),"widget"===o?new s.SShare_widget(r):new s.SShare_shortcode(r)))}}})},s.render_hustle_sshare_module_embeds(!1),Hustle.Events.on("upfront:editor:widget:render",function(t){s.render_hustle_sshare_module_embeds(!0)}),Hustle.Events.on("upfront:editor:shortcode:render",function(t){s.render_hustle_sshare_module_embeds(!0)})}(jQuery,document,window),function(t,e,i){"use strict";inc_opt.is_upfront||(t(window).on("resize",_.debounce(function(t){Hustle.Events.trigger("hustle_resize")},300)),_.each(Modules,function(t,e){if("popup"===t.module_type){new Optin.PopUp(t)}if("slidein"===t.module_type){new Optin.SlideIn(t)}if("social_sharing"===t.module_type){var i="1"===inc_opt.is_admin;if("undefined"!=typeof t.test_types&&null!==t.test_types&&"undefined"!=typeof t.test_types.floating_social&&(t.test_types.floating_social||"true"===t.test_types.floating_social)&&!i)return;if("undefined"!=typeof t.test_types&&null!==t.test_types&&"undefined"!=typeof t.test_types.floating_social&&(t.test_types.floating_social||"true"===t.test_types.floating_social)&&i&&(t.settings.floating_social_enabled="true"),_.isTrue(t.settings.floating_social_enabled)){new Optin.SShare_floating(t)}}}))}(jQuery,document,window);
//# sourceMappingURL=maps/front.min.js.map
